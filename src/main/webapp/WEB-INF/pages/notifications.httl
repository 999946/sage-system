<!DOCTYPE html>
<html>
<!--
#set(components = ["bootstrap", "layout", "tag", "user"])
#set(List<NotifView> notifications)
-->
<head>
  <meta charset="UTF-8">
  <title>${category}通知</title>
  $!{allcss}
  <style>
    .user-label{
      display: inline-block;
    }
    .notif{
      margin-top: 10px;
    }
  </style>
</head>
<body>
$!{include("navbar.httl")}
  <div id="container" class="container">
    #for(each : notifications)
    <div class="notif" data-id="${each.id}">
      $!{include("user-label.httl", ["u": each.sender])}
      ${each.desc}
      #if(each.source.length > 0)<a href="${each.source}">${each.source}</a>#end
      <div>${humanTime(each.time)}</div>
    </div>
    #end
  </div>
$!{includeProto}
$!{alljs}
<script>
  // mark-read after 1 second
  window.setTimeout(function () {
    var ids = []
    $('.notif').each(function(){
      ids.push(parseInt($(this).data('id')))
    })
    $.post("/notifications/mark-read", {id: ids})
  }, 1000);
</script>
</body>
</html>